{% extends "base.html" %}
{% load core_tags %}
{% load i18n %}

{% block nav-search %}
{% endblock %}

{% block container-top-extra %}
  <div class="row">
    <div class="packages-search eight columns">
      <p>{% trans "Find reference documentation for Python packages" %}</p>
      <form method="post" action="{% url "search" %}">
        {% csrf_token %}
        <label for="package">{% trans "Package name" %}</label>
        <input type="text" name="package" id="package" placeholder="requests" />
      </form>
    </div>
    <div class="packages-metadata four columns">
      <h2>{% trans "Recent packages" %}</h2>

      {% with releases=view.releases %}
        {% if releases %}
          <ul>
            {% for release in releases|slice:':6' %}
              <li>
                <a href="/pypi/{{ release.release_name }}/index.html">{{ release.package.name }} {{ release.version }}</a>
              </li>
            {% endfor %}

            {% with release_count=releases|length %}
              {% if release_count > 6 %}
                <li>... {{ release_count|add:"-6" }} more releases</li>
              {% endif %}
            {% endwith %}
          </ul>
        {% endif %}
      {% endwith %}

      {% with popular=view.popular %}
        {% if popular %}
          <h2>{% trans "Popular packages" %}</h2>

          <ul>
            {% for release in popular|slice:':6' %}
              <li>
                <a href="/pypi/{{ release.release_name }}/index.html">{{ release.package.name }}</a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}
    </div>
  </div>
{% endblock %}

{% block content %}
  <div class="row">
    <div class="four columns">
      <h2>Stuff</h2>
    </div>
    <div class="four columns">
      <h2>Stuff</h2>
    </div>
    <div class="four columns">
      <h2>Stuff</h2>
    </div>
  </div>
{% endblock content %}
